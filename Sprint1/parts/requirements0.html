<html>
<head>
	<link rel="stylesheet" type="text/css" href="../style/style.css">
</head>
<body>
	<div class=body>
	
		Lo scopo finale del <em>waiter</em> sarà quello di gestire una <em>tearoom</em>. Per portare a termine questo incarico è necessario che svolga diversi task. Analizziamo tutti i requisiti posti dal committente:

		<ol>
			<li><h4><em>accept</em> the request of a client to enter in the tearoom if there is at least one teatable in the state <em>tableclean</em>, i.e. the table is free and has been properly cleaned</h4>
			In questo requisito ci accorgiamo che le parole fondamentali sono: <em>client</em> e <em>table</em>.
			<ul>
				<li>Il <em>client</em> per entrare deve fare una richiesta allo <em>smartbell</em> e quindi deve inviare un messaggio. Solo se la sua temperatura risulta essere minore di 37.5 gradi la richiesta viene inoltrata al <em>waiter</em> altrimenti
				il <em>client</em> viene rifiutato perchè non rispetta le normative COVID.
				Lo <em>smartbell</em> interagisce con il <em>waiter</em> tramite una coppia di messaggi: richiesta di un <em>client</em> per entrare e risposta positiva o tempo di attesa da parte del <em>waiter</em>.
				Anche l'interazione tra <em>smartbell</em> e <em>client</em> avviene tramite una coppia di messaggi: richiesta da parte del <em>client</em> e risposta da parte dello <em>smartbell</em>.
				Ogni <em>client</em> ha un identificativo unico nell'arco della giornata dato dallo <em>smartbell</em> se la sua temperatura è inferiore alla soglia.</li>
				<li>Il <em>table</em> può trovarsi nello stato pulito o sporco.</li>
			</ul>

			<li><h4><em>inform</em> the client about the maximum waiting time if there is no <em>tableclean</em></h4></li>
			In assenza di <em>table</em> puliti il task <em>accept</em> non può essere eseguito; il <em>waiter</em> non accoglie il <em>client</em> ma lo informerà riguardo a quanto tempo deve aspettare.
			<em>maxwaittime</em> dipende dalla situazione attuale della <em>tearoom</em> e consiste nel tempo dopo il quale si prevede che ci sarà un <em>table</em> pulito.
			
			<li><h4><em>reach</em> the <em>entrance door</em> and <em>convoy</em> the accepted client to the selected teatable</h4>
			La prima cosa che si deduce leggendo questo requisito è la necessità di gestire il movimento del <em>waiter</em> e di conoscere la posizione delle entità nella <em>tearoom</em>.
			Inoltre il <em>waiter</em> deve conoscere lo stato dei <em>table</em> in modo da selezionarne uno pulito.

			<li><h4><em>take</em> the order of the client and transmit it (using a wifi-device) to the <em>barman</em></h4>
			Il committente ci ha detto che per prendere l'ordine dal <em>client</em>, il <em>waiter</em> si deve spostare fisicamente (gestione del movimento e posizione degli ostacoli di cui abbiamo parlato nel requisito precedente).
			Vediamo la necessità di introdurre due messaggi: uno quando il <em>client</em> deve chiamare il <em>waiter</em> e l'altro quando il <em>client</em> comunica l'ordine al <em>waiter</em>
			Sempre da questo requisito la trasmissione da <em>waiter</em> a <em>barman</em> ci indica l'introduzione di un altro messaggio.
			
			<li><h4><em>serve</em> the client when the <em>barman</em> says that the requested drink is ready</h4>
			Abbiamo chiesto al committente e ci ha detto che il <em>waiter</em> deve portare il drink dal <em>barman</em> al <em>client</em> e questo implica lo spostamento del <em>waiter</em> di cui abbiamo parlato nei punti precedenti.
			Abbiamo bisogno di un nuovo messaggio tra <em>barman</em>-<em>waiter</em> per comunicare al <em>waiter</em> che il drink è pronto.
			
			<li><h4><em>collect</em> the payment from the client when he/she has finished to consume or when the <em>maxstaytime</em> is expired</h4>
			Il pagamento, secondo il committente, richiede l'avvicinamento al <em>table</em> da parte del <em>waiter</em>. Affinchè il <em>client</em> possa indicare al <em>waiter</em> quando ha finito il suo drink è necessario un nuovo messaggio.
			La gestione del <em>maxstaytime</em> è stata spiegata dal committente nel seguente modo: quando il <em>client</em> viene portato al <em>table</em> parte un cronometro che tiene conto solo dell'attesa che può essere attribuita al <em>client</em>. Ad esempio, se il <em>client</em> non fa mai un ordine la responsabilità di questa attesa è sua e non del <em>waiter</em> o del <em>barman</em>, quindi il cronometro resta attivo. Invece, una volta fatto l'ordine, il cronometro viene bloccato per poi ripartire quando il drink arriva al <em>table</em>. 

			<li><h4><em>convoy</em> the client to the <em>exitdoor</em></h4>
			C'è la necessità che il <em>waiter</em> si sposti come nei requisiti precedenti per cui serve conoscere la posizione del <em>table</em> e di <em>exitdoor</em>.
			
			<li><h4><em>clean</em> the tea-table just freed by the client</h4>
			Questo task inizia solo dopo il task <em>convoy</em>. Alla fine lo stato del <em>table</em> cambia.
			Per pulizia si intende togliere il bicchiere, ed eventualmente altre cose lasciate dal <em>client</em>, e sanificare il <em>table</em>.
			
			<li><h4><em>rest</em> at my <em>home</em> when there is nothing to do</h4>
			Se il <em>waiter</em> non ha altri compiti da svolgere può andare nella posizione <em>home</em>
			
			<li><h4>Nell'introduzione, troviamo anche un altro requisito: il <em>manager</em> vuole vedere lo stato della <em>tearoom</em></h4>
			Dopo una discussione con il committente, per <em>current state</em> si intende:
			<ol>
				<li>Stato pulizia <em>table</em>; </li>
				<li><em>barman</em> occupato o no;</li>
				<li><em>table</em> occupati;</li>
				<li>Il task che il <em>waiter</em> sta eseguendo;</li>
				<li>Numero di <em>client</em> accettati/rifiutati.</li>
			</ol>
			
			<li><h4>Riassumiamo i task del <em>waiter</em> indicando sia il tempo qualitativo che quello quantitativo e prendiamo come caso di riferimento quello peggiore</h4></li>
			<table>
				<thead>
					<tr>
						<th class="tg-0lax">nome task</th>
						<th class="tg-0lax">cosa fa</th>
						<th class="tg-0lax">tempo qualitativo</th>
						<th class="tg-0lax">tempo quantitativo</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="tg-0lax"><em>accept</em></td>
						<td class="tg-0lax">conferma la richiesta del <em>client</em> se è presente un <em>table</em> nello stato <em>tableclean</em></td>
						<td class="tg-0lax">poco</td>
						<td class="tg-0lax">2s</td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>inform</em></td>
						<td class="tg-0lax">informa il <em>client</em> sul tempo massimo di attesa <em>maxwaittime</em> nel caso non sia possibile eseguire il task <em>accept</em>  <br></td>
						<td class="tg-0lax">poco</td>
						<td class="tg-0lax">2s</td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>reach</em></td>
						<td class="tg-0lax">raggiunge la porta di ingresso e accompagna il <em>client</em> (accettato) al <em>table</em> selezionato</td>
						<td class="tg-0lax">alto<br></td>
						<td class="tg-0lax">60s</td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>take</em></td>
						<td class="tg-0lax">va al <em>table</em> del <em>client</em>, prende l'ordine e lo trasmette al <em>barman</em></td>
						<td class="tg-0lax">poco</td>
						<td class="tg-0lax">8s</td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>serve</em></td>
						<td class="tg-0lax">quando il <em>barman</em> dice che la bevanda è pronta va a prenderla e la porta al <em>client</em> che l'aveva richiesta</td>
						<td class="tg-0lax">medio</td>
						<td class="tg-0lax">30s</td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>collect</em></td>
						<td class="tg-0lax">va al <em>table</em> del <em>client</em> per riscuotere il pagamento</td>
						<td class="tg-0lax">poco</td>
						<td class="tg-0lax">8s<br></td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>convoy</em></td>
						<td class="tg-0lax">accompagna il <em>client</em> alla porta</td>
						<td class="tg-0lax">medio</td>
						<td class="tg-0lax">30s</td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>clean</em></td>
						<td class="tg-0lax">pulisce il <em>table</em></td>
						<td class="tg-0lax">medio</td>
						<td class="tg-0lax">45s</td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>rest</em></td>
						<td class="tg-0lax">va in home se non c'è niente da fare</td>
						<td class="tg-0lax">medio/alto<br></td>
						<td class="tg-0lax">variabile</td>
					</tr>
				</tbody>
			</table>

			<li><h4>Riassumiamo i messaggi che sono emersi dall'analisi dei requisiti</h4></li>
			<table>
				<thead>
					<tr>
						<th class="tg-0lax">nome messaggio</th>
						<th class="tg-0lax">descrizione</th>
						<th class="tg-0lax">mittente-destinatario</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="tg-0lax"><em>clientRingEntryRequest</em></td>
						<td class="tg-0lax">richiesta da parte del <em>client</em> per entrare</td>
						<td class="tg-0lax"><em>client</em>-<em>smartebell</em></td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>clientRingEntryReply</em></td>
						<td class="tg-0lax">risposta da parte dello <em>smartbell</em></td>
						<td class="tg-0lax"><em>smartebell</em>-<em>client</em></td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>smartbellEntryRequest</em></td>
						<td class="tg-0lax">richiesta da parte dello <em>smartbell</em> per vedere se il <em>client</em> può entrare</td>
						<td class="tg-0lax"><em>smartbell</em>-<em>waiter</em></td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>smartbellEntryReply</em></td>
						<td class="tg-0lax">risposta da parte del <em>waiter</em></td>
						<td class="tg-0lax"><em>waiter</em>-<em>smartbell</em></td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>clientOrderReady</em></td>
						<td class="tg-0lax">richiesta di ordine del <em>client</em></td>
						<td class="tg-0lax"><em>client</em>-<em>waiter</em></td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>clientOrder</em></td>
						<td class="tg-0lax">il <em>client</em> comunica il suo ordine al <em>waiter</em></td>
						<td class="tg-0lax"><em>client</em>-<em>waiter</em></td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>waiterOrderForward</em></td>
						<td class="tg-0lax">invio ordine a barman</td>
						<td class="tg-0lax"><em>waiter</em>-<em>barman</em></td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>barmanOrderReady</em></td>
						<td class="tg-0lax">ordine pronto</td>
						<td class="tg-0lax"><em>barman</em>-<em>waiter</em></td>
					</tr>
					<tr>
						<td class="tg-0lax"><em>clientPaymentReady</em></td>
						<td class="tg-0lax"><em>client</em> desidera pagare</td>
						<td class="tg-0lax"><em>client</em>-<em>waiter</em></td>
					</tr>
				</tbody>
			</table>
	
			<li><h4>Riassumiamo le entità che sono emerse dai requisiti</h4></li>
			<table>
				<thead>
					<tr>
						<th class="tg-0pky">entità</th>
						<th class="tg-0pky">scopo</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="tg-0pky"><em>client</em></td>
						<td class="tg-0pky">entra, ordina, consuma un drink ed esce dalla <em>tearoom</em></td>
					</tr>
					<tr>
						<td class="tg-0pky"><em>table</em></td>
						<td class="tg-0pky">luogo in cui il <em>client</em> si siede e gli viene portato il drink</td>
					</tr>
					<tr>
						<td class="tg-0pky"><em>waiter</em></td>
						<td class="tg-0pky">accoglie il <em>client</em>, prende l'ordine e lo comunica al <em>barman</em>, serve il <em>client</em> e lo riaccompagna alla porta. Pulisce il <em>table</em></td>
					</tr>
					<tr>
						<td class="tg-0pky"><em>barman</em></td>
						<td class="tg-0pky">prepara il drink e avvisa il <em>waiter</em> quando è pronto</td>
					</tr>
					<tr>
						<td class="tg-0pky"><em>smartbell</em></td>
						<td class="tg-0pky">segnala la presenza di un <em>client</em> che vuole entrare</td>
					</tr>
				</tbody>
			</table>
		<br/>
		<br/>
		
	</div>
</body>
</html>